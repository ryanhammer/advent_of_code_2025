const exampleTachyonManifold = [
  ".......S.......",
  "...............",
  ".......^.......",
  "...............",
  "......^.^......",
  "...............",
  ".....^.^.^.....",
  "...............",
  "....^.^...^....",
  "...............",
  "...^.^...^.^...",
  "...............",
  "..^...^.....^..",
  "...............",
  ".^.^.^.^.^...^.",
  "...............",
];

const puzzleTachyonManifold = [
  "......................................................................S......................................................................",
  ".............................................................................................................................................",
  "......................................................................^......................................................................",
  ".............................................................................................................................................",
  ".....................................................................^.^.....................................................................",
  ".............................................................................................................................................",
  "....................................................................^.^.^....................................................................",
  ".............................................................................................................................................",
  "...................................................................^.^...^...................................................................",
  ".............................................................................................................................................",
  "..................................................................^...^.^.^..................................................................",
  ".............................................................................................................................................",
  ".................................................................^.^...^.^.^.................................................................",
  ".............................................................................................................................................",
  "................................................................^...^.^.^.^.^................................................................",
  ".............................................................................................................................................",
  "...............................................................^.............^...............................................................",
  ".............................................................................................................................................",
  "..............................................................^...^.^.^...^.^.^..............................................................",
  ".............................................................................................................................................",
  ".............................................................^.^.^...^.....^.^.^.............................................................",
  ".............................................................................................................................................",
  "............................................................^...^.^.^...^.^...^.^............................................................",
  ".............................................................................................................................................",
  "...........................................................^.^...^.^...^.^.^...^.^...........................................................",
  ".............................................................................................................................................",
  "..........................................................^.^.^.^...^...^...^.....^..........................................................",
  ".............................................................................................................................................",
  ".........................................................^.^.^.....^.^.^.^...^.....^.........................................................",
  ".............................................................................................................................................",
  "........................................................^.^.^.^.^.......^...^.^.^...^........................................................",
  ".............................................................................................................................................",
  ".......................................................^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.......................................................",
  ".............................................................................................................................................",
  "......................................................^.....^...^.^.^...........^...^.^......................................................",
  ".............................................................................................................................................",
  ".....................................................^...^.^.^.^...^.....^.^.^...^...^.^.....................................................",
  ".............................................................................................................................................",
  "....................................................^.....^.^.^.^.....^.^.^.^.^.^...^.^.^....................................................",
  ".............................................................................................................................................",
  "...................................................^...^.^.^.^.^.^.^...^.^.^.^...^.^.^.^.^...................................................",
  ".............................................................................................................................................",
  "..................................................^.^.^.^.^...^.^...^.^...^.^.^.^.^.^...^.^..................................................",
  ".............................................................................................................................................",
  ".................................................^...^.....^...^.^.^.^...^.....^.^...^.^...^.................................................",
  ".............................................................................................................................................",
  "................................................^.^.^.....^.^.^.^.....^.^.^.^...^.....^.^.^.^................................................",
  ".............................................................................................................................................",
  "...............................................^.....^.......^.....^...^.^...^.^.^...^.......^...............................................",
  ".............................................................................................................................................",
  "..............................................^.^...^...^.^...^...^...^.^...^.^.^.^...^...^.^.^..............................................",
  ".............................................................................................................................................",
  ".............................................^...^...^.^.........^.^...^.^.....^.^.^.^.^.^...^.^.............................................",
  ".............................................................................................................................................",
  "............................................^.^.^...^.^.^.^.^...^.^.^...^.^...^.^...^.^.^.^.^.^.^............................................",
  ".............................................................................................................................................",
  "...........................................^.....^.........^.^.^.^.^.^.^...^.^.^...^.^.^.^...^...^...........................................",
  ".............................................................................................................................................",
  "..........................................^.^.^.....^.......^.^...^.^.^.^.^.^.....^...^.^.^.^.^...^..........................................",
  ".............................................................................................................................................",
  ".........................................^.^.^.^.^...^.^.....^.....^.^.^.^.^.^.^...^...^.^.^.^.^.^.^.........................................",
  ".............................................................................................................................................",
  "........................................^.^.^...^...^.^.^.^.^.^.^.^...^...^...^.^...^.^...^...^.....^........................................",
  ".............................................................................................................................................",
  ".......................................^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.....^.^.^.^.^.^.^.........^.^.......................................",
  ".............................................................................................................................................",
  "......................................^.^.^.^.^.^.^.^.^.^.^...^.....^.......^.^.^.^.^.^.^.^...^...^...^......................................",
  ".............................................................................................................................................",
  ".....................................^.^.^.^.^...^...^.^.......^...^.^.....^...^.^.^.^.^.....^.^.^.^.^.^.....................................",
  ".............................................................................................................................................",
  "....................................^.....^.^...^...^.^.^.^.^.^...^.^.^...^.^.^.^.....^...^.^.^.^.^.^...^....................................",
  ".............................................................................................................................................",
  "...................................^.....^.^.........^...^.^.^.^.^.^.^...^.^.^...^.^.^.^.^...^.^...^.^...^...................................",
  ".............................................................................................................................................",
  "..................................^.^.^.^...^.^.^.^.^...^.^...^.^.^.^.^.....^.^.^.^.^.....^...^.....^.^.^.^..................................",
  ".............................................................................................................................................",
  ".................................^.^.........^...^.....^.^...^.^...^.^.^...^.^...^...^.^...^.^.^.^.^.....^.^.................................",
  ".............................................................................................................................................",
  "................................^.^...^.^.^.^.^...^...^...............^.....^.....^.^.^.^.^.^.^.^.^.^.....^.^................................",
  ".............................................................................................................................................",
  "...............................^.^.^...^.^...^.^.^...^...^.^.....^.^.^...^.^.^.^...^.^.^.^.^.^.^.^.^...^.^.^.^...............................",
  ".............................................................................................................................................",
  "..............................^...^.^.^.^.^.^.....^.^.^.^.....^.......^.^.^.^.^...^.^.^.^...^...^...^.^.^.....^..............................",
  ".............................................................................................................................................",
  ".............................^.^.^...^.^.^.^.^.^...^...^.^.^.^.^.^...^.^.^.^.^.......^.^.^.^...^.^.^.^...^.^...^.............................",
  ".............................................................................................................................................",
  "............................^.....^.^...^.^...^.^.....^.^...^.......^...^.^.....^...^.^...^...^.^.^.....^.^.....^............................",
  ".............................................................................................................................................",
  "...........................^...^...^...^.^.......^.....^.^.....^.^.^.^.^...^.^.^.^.....^.^.^...^.^.^.....^...^...^...........................",
  ".............................................................................................................................................",
  "..........................^.....^.^.^.......^.^...^.^.^.^.^.^.^.^.^.^.....^.....^.^...^.^...^.^.^...^...^.^.^.^...^..........................",
  ".............................................................................................................................................",
  ".........................^.^.^.^.^.^.^.^.^.^...^.....^.^...^.^.^.^.^.^.^.^.^...^.^.^.^.^.^...^.^.^...^.^...^.^.^.^.^.........................",
  ".............................................................................................................................................",
  "........................^.^.^...^.^.^...^.^...^.........^.^.^...^.^.^.^.....^.^...^.^.^.^.^...^.^.^...^.^.....^.....^........................",
  ".............................................................................................................................................",
  ".......................^.^.^.^...^.^.....^...^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^...^.^.....^.......^.^.^.^...^.^...^.......................",
  ".............................................................................................................................................",
  "......................^.^...^.^.^.^.....^.^.^.^.^.....^.^...^.^.^.^.^.^.^...^...^.^.^.^...^.....^.^...^.^.^.^.^.^.^.^.^......................",
  ".............................................................................................................................................",
  ".....................^.^.^.^.^...^.^...^...^.^...^.^...^.^...^.......^.^.^.^.....^.^...^.^.^.^...^.^.^.^.^.^.^.^...^.^.^.....................",
  ".............................................................................................................................................",
  "....................^...^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^...^...^.^.^.^.......^...^.....^.^...^...^.^.....^.^.^...^.^.^....................",
  ".............................................................................................................................................",
  "...................^.^.^.^.^.^.......^.^.^.......^...^.^.^.^...^.^.^...^.^.^.^...^.^.^.^.....^.^.^.^.^.^...^.^...^.....^.^...................",
  ".............................................................................................................................................",
  "..................^.^...^.......^.^.^.^.....^.^...^.^...^...^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^.^...^.^.^...^..................",
  ".............................................................................................................................................",
  ".................^.....^.^...^...^.^.^.^...^.^.^.^...^.......^.^...^...^.^.^.....^.^.^...^.^...^.....^.^...^.^.^.^.^.^.^.^.^.................",
  ".............................................................................................................................................",
  "................^.^.^.....^.^.^.^.^.^.^.......^.^.^.....^...^.^...^.^.^.^.^...^.^...^.^.^...^...^.^.^.^...^.^.^.^...^.^.....^................",
  ".............................................................................................................................................",
  "...............^...^.^.^.^.^.^...^.^...^...^.^.^.^.^.^.^...^...^.^...............^...^.^.^.^.....^.....^.^.^.^.....^.^...^.^.^...............",
  ".............................................................................................................................................",
  "..............^.^...^.^.^.........^.........^...^.^.^.....^.^...^.^.^.^.^.^...^...^.^...^.^.^.^.......^.^...^.....^.^.^.^.^.^.^..............",
  ".............................................................................................................................................",
  ".............^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.....^.^.^.^...^.^.^.^.^...^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.............",
  ".............................................................................................................................................",
  "............^.^.^.^...^.^.^.^.^...^...^.....^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^.^.^...^.^.^...^...^.....^.^...^.^.^.^.^.......^...^............",
  ".............................................................................................................................................",
  "...........^.....^.^.^.^.....^.^...^.^.^.^.^.....^.^.^...^.^.^...^.^.....^.......^.^.^.....^.^.^.^...^.^.^.^.^.^.^.^.^.^...^...^.^...........",
  ".............................................................................................................................................",
  "..........^.^.^.^.........^.^.....^.......^.^...^.^.^.......^.......^.^.^.^.....^.^...^.^...^.^.^.^...^...^.^.^.^.^.^.^...^.^.^.^.^..........",
  ".............................................................................................................................................",
  ".........^.^.^...^.^.........^...^.^...^.^.^.^.^.^.^.^.....^.^.^.^...^.^.^...^...^...^.^.^.^.^.^.^.^.^.^.^...^.^...^.^...^.^.^...^.^.........",
  ".............................................................................................................................................",
  "........^.^.^.^.^...^.^...^.^.^.^...^.^.^.^.^.....^...^...^.^...^.^...^.^.^.^...^...^.^...^.......^.^.^.^...^.....^...^.^.^.....^.^.^........",
  ".............................................................................................................................................",
  ".......^.^.^...^.^.^.....^.^.^.^.....^.....^.^...^.^.^.....^.^...^...........^...^.^.^.^.....^...^.^.^...^.^.^.^.......^.^.^.^.^.....^.......",
  ".............................................................................................................................................",
  "......^.^...^.....^.^...^.....^...^...^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^...^.^.^...^.^.^.^.^.^.^.^...^.....^.^.....^.^.^.^.^...^...^.^......",
  ".............................................................................................................................................",
  ".....^.^.^.^.^.^...^.^.......^.^.^...^...^.^.^.^.^.^.^.....^.^.....^...^.....^.^.^.^...^.^.^.^.^.^.^...^.^.^.^.^.^.^.^...^...^.^.^...^.^.....",
  ".............................................................................................................................................",
  "....^.^.^.....^.^...^.^...^.^.......^...^.^.^.^.^.^...^...^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^.^...^.^.^.^.^.^.^.....^.^...^...^.^.^.^.^.^.^....",
  ".............................................................................................................................................",
  "...^.^.......^.^.....^.^.^.^.^...^.^...^.^.^.^.^.^.^.^.^.^.^...^...^.^.^.^.^.....^.^.^...^.^.^...^...^.^.^...^...^.^.^.^...^.^...^.^...^.^...",
  ".............................................................................................................................................",
  "..^.....^.^.^...^.........^.....^...^.^.^...^.^.....^...^.^.^.^.^.^...^.........^...^.^...^...^.^...^...^.......^.^.....^.^.......^.^.^...^..",
  ".............................................................................................................................................",
  ".^.^...^.....^.^.^.^...^.^.....^.^.^.^.^.^.^.^...^...^.^.......^.^...^.^.....^.^.^...^.....^.^.^.^.^.^.......^.^.^...^.^.^.^.^...^...^.^.^.^.",
  ".............................................................................................................................................",
];

function determineNumberManifoldBeamSplits (manifold: string[]): number {
  let beamSplitCount = 0;
  const manifoldBeamPositions = manifold[0].split("").map(value => value === "S");

  for (let i = 2; i < manifold.length; i++) {
    if (i % 2 === 0) {
      for (let j = 0; j < manifoldBeamPositions.length; j++) {
        if (manifoldBeamPositions[j] && manifold[i][j] === "^") {
          beamSplitCount++;
          manifoldBeamPositions[j] = false;
          manifoldBeamPositions[j - 1] = true;
          manifoldBeamPositions[j + 1] = true;
        }
      }
    }
  }

  return beamSplitCount;
}

console.log(determineNumberManifoldBeamSplits(exampleTachyonManifold));
console.log(determineNumberManifoldBeamSplits(puzzleTachyonManifold));
